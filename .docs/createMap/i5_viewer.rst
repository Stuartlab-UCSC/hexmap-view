
Viewer Input Files
==================

This describes formats of input files for the Tumor Map viewer, most of which
are generated by the Layout utility.

These tokens are used in some filenames:

**LAYER** : represents the attribute/layer index

**LAYOUT** : represents the layout index

meta.json
---------

This file assigns one or more groups to this project so that only
users belonging
to one of the groups are authorized to see this project's maps.
If this file does not exist, only users in the groups 'omni' or 'dev' may see
this project's maps.
Any user, logged in or not, may see projects in the group 'public'.

 { "role": "CIRM" }

This file resides in the project directory.

The rest of the files below reside in either the project directory if there is only
one map for the project, or in the sub-project directory if the project has
multiple maps.

hexNames.tab
------------

A list of node/hexagons::

 S1
 ...

layouts.tab
-----------

Names of the layouts in order of the LAYOUT index used in some
file names::

 mRNA seq
 ...

assignmentsLAYOUT.tab (1)
-------------------------

The xy coordinates from zero to whatever. May be
of type float. One file per layout::

 node   x   y
 S1     42  66
 ...

Layer_Data_Types.tab
--------------------

Lists of attribute data types, mostly. FirstAttribute
is the attribute to display on the initial map view::

 FirstAttribute  Tissue
 Continuous      DNA_signature   Apoptosis   ...
 Binary          TP53_mutated    DNA_repair_broken    ...
 Categorical     Subtype Gender  ...

layer_LAYER.tab (1)
-------------------

The attribute values for nodes with a value for this
attribute. One file per attribute::

 node    value
 S1     0.642
 ...

colormaps.tab (1)
-----------------

Color mappings to categories. This is only used for categorical attributes.
The layout utility copies this to the view directory as is::

 attribute      index1   category1      color1    index2   category2   color2   ...
 UCEC Subtype   0        Endometrioid   #FF0000   1        Serous      #00FF00   ...
 ...

attribute_tags.tab (1)
----------------------

This file is optional and allows you to assign tags to attributes and
these tags are used to limit the number of attributes displayed and searchable in the
attribute list.
This file should be defined in the layout input data directory and will be
copied to the view directory by the layout utility::

 attribute   tag1       tag2   ...
 Tissue      clinical   phenotype   ...
 ...


Optionally Generated Files
--------------------------

**xyPreSquiggle_LAYOUT.tab** (1)

xy coordinates of nodes prior to being transformed into the hexagonal grid.
Displayed in the Node Density view.
The layout utility generates these files, one per layout::

 node   x       y
 S9     35.9    19.7
 ...

**stats_LAYER.tab**

Associative statistics with other attributes, independent of the layout.
The layout utility generates these files, one per attribute/layer.

**statsL_LAYER_LAYOUT.tab**

Associative statistics with other attributes, taking the layout into account.
The layout utility generates these files, one per attribute per layout.

**windows_LAYOUT.tab**

Sampling windows used in layout-aware statistics.
The layout utility generates these files, one per layout.

**neighbors_LAYOUT.tab**

The closest six neighbors to each node. Displayed in the Node Density view: Edges.
The layout utility generates these files, one per layout.

**grid_LAYOUT.tab**

Adaptive windowing used for the layout-aware statistics.
Displayed in the Node Density view: Windows.
The layout utility generates these files, one per layout.

The remaining files are unused by the Tumor Map viewer. Maybe something else
uses them.

**matrices.tab**

Filenames of the attribute scores::

 matrix_0.tab
 matrix_1.tab
 ...

**matrix_LAYER.tab**

Attribute scores for nodes::

 node   attr0   attr1   attr2   ...
 S1     3       0.485   -1.24   ...
 ...

Note
(1) The viewer needs to be modified to ignore the headers in this file so this
file does not yet have the headers.
