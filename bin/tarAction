#!/bin/bash
# tar the contents of hexagram and scp to dev
# or untar the contents of a tar ball

ACTION=$1
INSTALL=$2


if [ $ACTION == 'maketar' ]; then
    echo transferring everything except docs and tests/pyUnittest
    TAR_FILES=" \
        calc/*py \
        www/client \
        www/lib \
        www/public/*svg \
        www/public/*ico \
        www/public/*png \
        www/public/icons \
        www/public/images \
        www/public/*js \
        www/public/*gif \
        www/server/*js \
        www/server/*py \
        www/package.json \
        "
elif [ $ACTION == 'maketarHub' ]; then
    echo transferring the hub files
    TAR_FILES=" \
        *py \
        *sh \
        "
elif [ $ACTION == 'maketarBin' ]; then
    echo transferring the bin/config files
    TAR_FILES=" \
        bin/run_server \
        bin/tarAction \
        config/* \
        "
elif [ $ACTION == 'maketarDocs' ]; then
    echo transferring only the docs in www/public
    TAR_FILES=" \
        www/public/createMap \
        www/public/query \
        www/public/useCases \
        "
elif [ $ACTION == 'maketarTests' ]; then
    echo transferring only tests/pyUnittest
    TAR_FILES=" \
        tests/pyUnittest/README \
        tests/pyUnittest/exp \
        tests/pyUnittest/in \
        tests/pyUnittest/run* \
        tests/pyUnittest/sort_files \
        tests/pyUnittest/*py \
        "
fi

if [ $ACTION == 'maketar' ] \
    || [ $ACTION == 'maketarBin' ] \
    || [ $ACTION == 'maketarHub' ] \
    || [ $ACTION == 'maketarDocs' ] \
    || [ $ACTION == 'maketarTests' ]
    then
    echo 'tarring to' t.tar
    rm t.tar
    tar -cf t.tar $TAR_FILES
    ls -l t.tar
    scp t.tar juggernaut:dev

elif [ $ACTION == 'xtar' ]; then
    #echo 'cleaning directories'
    #rm -rf t.tarS
    echo 'untarring'
    tar -xf /cluster/home/swat/dev/t.tar
    echo 'xtar done'

else
    echo Invalid tar action: $ACTION
    echo Exiting
fi
