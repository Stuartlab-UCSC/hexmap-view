<!DOCTYPE html>
<html>
    <head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="maximum-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1" />

         <link rel="stylesheet" type="text/css" href="https://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css">
        <link rel="stylesheet" type="text/css" href="lib/select2.css">
        <link rel="stylesheet" type="text/css" href="hexagram.css">
        <title>Tumor Map of UCSC</title>
    </head>
    <body id='body'>

        <!-- <div class="tools row viewport" id="toolbar"> -->

        <div class="tools row" id="toolbar">
            <div class="title stacker">
                UCSC Tumor Map
            </div>
            <div id='loadDir' class='stacker' style='display:none;width: 9em'>
            </div>
            <div class="stacker right">
                <img src="images/throbber.svg" class="recalculate-throbber" title="Recalculating..." />
                <span class="recalculate-progress">
                    <span id="jobs-running">0</span>/<span id="jobs-in-batch">0</span> jobs running.
                </span>
                <span class="recalculate-finished">
                    Done.
                </span>
            </div>
            <div class="stacker right">
                <div id="recalculate-progress" class="recalculate-progress"></div>
            </div>
        </div>
        <div class="header row" id="header">
            <div class="browse col vertical-table">
                <div class="vertical-cell">
                    <div id="browse-holder">
                        <input id="search" type="hidden"/>
                        <img style='display:none' src="images/statistics.svg" id="comparison-stats" title="Differential Contrast of Sample Selections" onclick="update_comparison_stats_drop_down()"/>
						<img src="images/throbber.svg" class="recalculate-throbber" title="Recalculating..." />
						<img src="images/set.svg" id="set-operation" title="Calculate Set Operation"/>
						<img src="images/sort_attributes.svg" id="sort-attributes-button"/>
                    </div>
					<div id="layout-holder">
						<input id="layout-search" type="hidden"/>
					</div>
				</div>
				<div id="current-layout">Current Layout:</div> 	
				<div id="ranked-against">Sorted By Association with:</div> 
            </div>
			<div class="comparison-stats dropdown">
				<div class="dropdown-title">Sort Attributes by Dichotomy
					<a class="cancel" href="#" onclick="hide_comparison_stats_drop_down(); reset_comparison_stats_counter()">X </a>
				</div>
				<div class="dropdown-body">
				    <div id="comparison-statistics" class="dropdown-contents">
				    </div>
			    </div>
			</div>
			<div class="set-operation dropdown">
				<div class="dropdown-title">Perform Set Operation
					<a class="cancel" href="#" onclick="hide_set_operation_drop_down(); reset_set_operation_counter()">X</a>
				</div>
				<div class="dropdown-body">
				    <select id="set-operations-list" onchange="update_set_operation_drop_down()">
					    <option value = "0" selected = 'selected'>Select Set Operation:</option>
					    <option value = "1">∩ - Intersection</option>
					    <option value = "2">U - Union</option>  
					    <option value = "3">\ - Set Difference</option>
					    <option value = "4">∆ - Symmetric Difference</option>
					    <option value = "5">Not:</option>
				    </select>
				    <div id="set-operations" class="dropdown-contents">
				    </div>
			    </div>
			</div>
			<div id="sort-attributes">
                <div id="sort-attributes-dialog" style='display:none'>
                <table>
                    <tr style=''>
                        <td class='dialog-value'>
                            <img class="help-button" src="images/help.svg">
                         </td>
                    </tr>

                    <tr>
                        <td class='dialog-label'>
                            Focus attribute:
                        </td>
                        <td class='dialog-value'>
                            <select class="list"></select>
                        </td>
                    </tr>
                    <tr class='region-sample-options'>
                        <td class='dialog-label'>
                            Sort based on:
                        </td>
                        <td class='dialog-value'>
                            Samples
                            <!--
                            <input style='display:none' type="radio" name="region-sample-options" id="sort-region-based" value="true" />
                            <label style='display:none' for=sort-region-based>Region</label><br/>
                            <input style='display:none' type="radio" name="region-sample-options" id="sort-sample-based" value="false" />
                            <label style='display:none' for=sort-sample-based>Sample</label><br/>
                            -->
                        </td>
                    </tr>
                    <tr style='display:none' class='region-based-options'>
                        <td>
                            <span>Anticorrelated only:</span>
                            <input type="radio" name="anticorrelated" id="anticorrelated-only-pos" value="Positive Associated" />
                            <label for="anticorrelated-only-pos">Positive Associated</label><br/>
                            <input type="radio" name="anticorrelated" id="anticorrelated-only-neg" value="Negative Associated" />
                            <label for="anticorrelated-only-pos">Negative Associated</label><br/>
                        </td>
                    </tr>
                    <tr class='sample-based-options'>
                        <td class='dialog-label'>
                            Attribute value types:
                        </td>
                        <td class='dialog-value'>
                            <input id='sort-binary' type="checkbox"/>
                            <label for="sort-binary">0/1</label>
                        </td>
                    </tr>
                    <tr class='sample-based-options'>
                        <td class='dialog-label'></td>
                        <td class='dialog-value'>
                            <input id='sort-categorical' type="checkbox"/>
                            <label for="sort-categorical">Integer</label>
                        </td>
                    </tr>
			    </table> <!-- sort-attributes-dialog -->
                </div>
                <div id='sort-attributes-help-dialog' title="Sort Help" style='display:none'>
                    <div>
                        <p>
                            Integer and 0/1 values are support for this sort.
                            Floating point values are not supported.
                        </p>
                        <p>
                            <b>Focus attribute:</b> The focus attribute is the attribute against
                            which all other attributes are compared. The list of attributes 
                            is sorted in terms of association with the focus attribute.
                        </p>
                        <p style='display:none'>
                            <b>Region-based:</b> Region-based statistics are calculated by examining
                            the presence of two attributes 
                            within regions across the tumor map. Since Region-based
                            statistics depend on the location of tumors, each map 
                            produces different statistics. Thus, an mRNA Seq map will 
                            have different statistics values than a DNA Methylation map. 
                            Region-based statistics will help you find attributes that
                            can be mutually exclusive but invoke similar pathways 
                            as indicated by the proximity of tumors with these attributes 
                            on the map.
                        </p>
                        <p style='display:none'>
                            <b>Anticorrelated:</b> Region-based statistics are
                            calculated only for layers that are significantly
                            anticorrelated with the focus attribute, and the same type as the
                            focus attribute. Focus attribute may not have categorical/integer values.
                        </p>
                        <p>
                            <b>Sort based on samples:</b> Sample-based
                            statistics are calculated without taking the map layout into 
                            account. A standard statistical test, Chi-Squared, is used.
                        </p>
                        <p style='display:none'>
                            <b>All Attributes: WARNING:</b> 
                            Selecting all attributes will result in a single list of sorted attributes 
                            that have been ranked with results from statistics tests. Comparisons
                            may not be accurate. It is recommended to compare focus attribute to
                            different data types one at a time, e.g. using one statistics test.
                        </p>
                        <p>
                            <b>Value type: 0/1:</b> Sort focus attribute against all attributes with 0/1 values.
                        </p>
                        <p>
                            <b>Value type: Integer:</b> Sort focus attribute against all attributes with integer values.
                        </p>
                        <p style='display:none'>
                            <b>Floating Point:</b> Sort focus attribute
                            against all attributes with continuous data values.
                        </p>
                    </div>
                </div> <!-- help-dialog -->
			</div> <!-- sort-attributes -->
			
			
			
            <div class="shortlist col">
                <div id="shortlist-holder" class="panel-holder">
                    <div id="shortlist-panel" class="panel">
                        <div class="panel-title">Shortlist</div>
                        <div id="shortlist" class="panel-contents">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="error row" id="error">
            <div id="error-notification">
            </div>
        </div>
        <div class="content row" id="content">
            <div class="key">
                <canvas id="color-key" width="100" height="100"></canvas>
                <div class="label" id="low-both">Low</div>
                <div class="label" id="high-x">High</div>
                <div class="label y" id="high-y">High</div>
                <div class="label axis" id="x-axis"></div>
                <div id="y-axis-holder">
                    <div id="y-axis-cell">
                        <div class="label axis" id="y-axis"></div>
                    </div>
                </div>
            </div>
            <div id="visualization">
            </div>
        </div>

        <!-- load the scripts last so the user will see something sooner rather than later -->

        <!-- online library scripts -->
        <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
        <script type="text/javascript" src="https://code.jquery.com/jquery-1.9.1.min.js"></script>
        <script type="text/javascript" src="https://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>

        <!-- Local library scripts -->
        <script type="text/javascript" src="lib/underscore.js"></script>
        <script type="text/javascript" src="lib/jquery.tsv.js"></script>
        <script type="text/javascript" src="lib/color-0.4.1.js"></script>
        <script type="text/javascript" src="lib/jstat.min.js"></script>
        <script type="text/javascript" src="lib/select2.js"></script>
        <script type="text/javascript" src="lib/maplabel.js"></script>
        <!--
        <script type="text/javascript" src="lib/require.js"></script>
		<script type="text/javascript" src="lib/react-with-addons.js"></script>
		<script type="text/javascript" src="lib/JSXTransformer.js"></script>
        -->

        <!-- Scripts we wrote -->
        <script type="text/javascript" src="state.js"></script>
        <script type="text/javascript" src="hexagram.js"></script>
        <!-- <script type="text/javascript" src="load.js"></script> -->
        <script type="text/javascript" src="atools.js"></script>
        <script type="text/javascript" src="sortAttrs.js"></script>
        <script type="text/javascript" src="svg.js"></script>
        <script type="text/javascript" src="colors.js"></script>
        <script type="text/javascript" src="mainHex.js"></script>
    </body>
</html>
