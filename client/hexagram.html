<template name='mapPage'>
        <div class="tools row" id="toolbar">
            <div class="title stacker">
                UCSC Tumor Map
            </div>
            <!--
            <div id='loadDir' class='stacker' style='display:none;width: 9em'>
            </div>
            -->
            <div class="stacker right">
                <img src="throbber.svg" class="recalculate-throbber" title="Recalculating..." />
                <span class="recalculate-progress">
                    <span id="jobs-running">0</span>/<span id="jobs-in-batch">0</span> jobs running.
                </span>
                <span class="recalculate-finished">
                    Done.
                </span>
            </div>
            <div class="stacker right">
                <div id="recalculate-progress" class="recalculate-progress"></div>
            </div>
        </div>
        <div class="header row" id="header">
            <div class="browse col vertical-table">
                <div class="vertical-cell">
                    <div id="browse-holder">
                        <input id="search" type="hidden"/>
                        <img style='display:none' src="statistics.svg" id="comparison-stats" title="Differential Contrast of Sample Selections" onclick="update_comparison_stats_drop_down()"/>
						<img src="throbber.svg" class="recalculate-throbber" title="Recalculating..." />
						<img src="set.svg" id="set-operation" title="Calculate Set Operation"/>
						<img style='display:none' src="sort_attributes.svg" id="sort-attributes" title="Sort Attributes by Association with Pivot Attribute"/>
                    </div>
					<div id="layout-holder">
						<input id="layout-search" type="hidden"/>
					</div>
				</div>
				<div id="current-layout">Current Layout:</div> 	
				<div id="ranked-against">Sorted By Association with:</div> 
            </div>
			<div class="comparison-stats dropdown">
				<div class="dropdown-title">Sort Attributes by Dichotomy
					<a class="cancel" href="#" onclick="hide_comparison_stats_drop_down(); reset_comparison_stats_counter()">X </a>
				</div>
				<div class="dropdown-body">
				    <div id="comparison-statistics" class="dropdown-contents">
				    </div>
			    </div>
			</div>
			<div class="set-operation dropdown">
				<div class="dropdown-title">Perform Set Operation
					<a class="cancel" href="#" onclick="hide_set_operation_drop_down(); reset_set_operation_counter()">X</a>
				</div>
				<div class="dropdown-body">
				    <select id="set-operations-list" onchange="update_set_operation_drop_down()">
					    <option value = "0" selected = 'selected'>Select Set Operation:</option>
					    <option value = "1">∩ - Intersection</option>
					    <option value = "2">U - Union</option>  
					    <option value = "3">\ - Set Difference</option>
					    <option value = "4">∆ - Symmetric Difference</option>
					    <option value = "5">Not:</option>
				    </select>
				    <div id="set-operations" class="dropdown-contents">
				    </div>
			    </div>
			</div>


			<div id="sort-attributes">
                <div id="sort-attributes-dialog" style='display:none'>
                <table>
                    <tr style=''>
                        <td class='dialog-value'>
                            <img class="help-button" src="images/help.svg">
                         </td>
                    </tr>

                    <tr>
                        <td class='dialog-label'>
                            Focus attribute:
                        </td>
                        <td class='dialog-value'>
                            <select class="list"></select>
                        </td>
                    </tr>
                    <tr style='display:none' class='region-sample-section'>
                        <td class='dialog-label' style='vertical-align:top'>
                            Sort attributes as:
                        </td>
                        <td class='dialog-value'>
                            <label>
                                <input type='radio' name='region-sample-section' id='sort-sample-based' value='sample-based' checked='checked'/>
                                Sample-based
                            </label><br>
                             <label style='color:grey'>
                                <input type='radio' name='region-sample-section' id='sort-region-based' value='region-based' disabled='disabled' />
                                Region-based
                            </label>
                        </td>
                    </tr>
                    <tr style='display:none' class='region-section'>
                        <td>
                            <span>Anticorrelated only:</span>
                            <input type="radio" name="anticorrelated" id="anticorrelated-only-pos" value="Positive Associated" />
                            <label for="anticorrelated-only-pos">Positive Associated</label><br/>
                            <input type="radio" name="anticorrelated" id="anticorrelated-only-neg" value="Negative Associated" />
                            <label for="anticorrelated-only-pos">Negative Associated</label><br/>
                        </td>
                    </tr>
                    <tr class='sample-section'>
                        <td class='dialog-label'>
                            Include attributes<br>that are:
                        </td>
                        <td class='dialog-value'>
                            <input class='sort-binary' id='sort-binary' type="checkbox" checked=true />
                            <label for='sort-binary'>
                                Labels (yes/no)
                            </label>
                            <br>
                            <input class='sort-categorical' id='sort-categorical' type="checkbox" />
                            <label for='sort-categorical'>
                                Categories
                            </label>
                       </td>
                    </tr>
			    </table>
                </div> <!-- sort-attributes-dialog -->
                <div id='sort-attributes-help-dialog' title="Sort Help" style='display:none'>
                    <div>
                        <p>
                            The statistics for the sort are calculated without
                            taking the map layout into account. A chi-Squared
                            test is used.
                        </p>
                        <p>
                            <b>Samples included:</b> All samples that have values
                            for the particular attribute are included in the
                            statistics and the sort. That is, null values are
                            dropped from the statistics.
                        </p>
                        <p>
                            <b>Attributes included:</b> Attributes that have
                            category values or label (yes/no) values may be included.
                            Floating point (continuous) values are not included.
                            Attributes built by the user from other attributes are not
                            included.
                        </p>
                        <p>
                            <b>Focus attribute:</b> Attributes are sorted
                            in terms of association with the focus attribute.
                        </p>
                        <p style='display:none'>
                            <b>Region-based:</b> Region-based statistics are
                            calculated by examining the presence of two attributes
                            within regions across the tumor map. Since Region-based
                            statistics depend on the location of tumors, each map 
                            produces different statistics. Thus, an mRNA Seq map will 
                            have different statistics values than a DNA Methylation map. 
                            Region-based statistics will help you find attributes that
                            can be mutually exclusive but invoke similar pathways 
                            as indicated by the proximity of tumors with these attributes 
                            on the map.
                        </p>
                        <p style='display:none'>
                            <b>Anticorrelated:</b> Region-based statistics are
                            calculated only for layers that are significantly
                            anticorrelated with the focus attribute, and the same type as the
                            focus attribute. Focus attribute may not have category
                            or label (yes/no) values.
                        </p>
                        <p style='display:none'>
                            <b>Sort attributes as: Sample-based:</b> These
                            statistics are calculated without taking the map layout into 
                            account. Chi-Squared is used.
                        </p>
                        <p style='display:none'>
                            <b>Sort attributes as: Region-based:</b> These
                            statistics are calculated while taking the map layout into
                            account. This option is not yet available.
                        </p>
                        <p style='display:none'>
                            <b>All Attributes: WARNING:</b> 
                            Selecting all attributes will result in a single list of sorted attributes 
                            that have been ranked with results from statistics tests. Comparisons
                            may not be accurate. It is recommended to compare focus attribute to
                            different data types one at a time, e.g. using one statistics test.
                        </p>
                        <p>
                            <b>Include attributes that are Labels (yes/no):</b>
                            Sort all attributes with label (yes/no) values against
                            the focus attribute.
                        </p>
                        <p>
                            <b>Include attributes that are Categories:</b>
                            Sort all attributes with category values against
                            the focus attribute.
                        </p>
                        <p style='display:none'>
                            <b>Floating Point:</b> Sort focus attribute
                            against all attributes with continuous data values.
                        </p>
                    </div>
                </div> <!-- help-dialog -->
			</div> <!-- sort-attributes -->
			
			
			
            <div class="shortlist col">
                <div id="shortlist-holder" class="panel-holder">
                    <div id="shortlist-panel" class="panel">
                        <div class="panel-title">Short List</div>
                        <div id="shortlist" class="panel-contents">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="error row" id="error">
            <div id="error-notification">
            </div>
        </div>
        <div class="content row" id="content">
            <div class="key">
                <canvas id="color-key" width="100" height="100"></canvas>
                <div class="label" id="low-both">Low</div>
                <div class="label" id="high-x">High</div>
                <div class="label y" id="high-y">High</div>
                <div class="label axis" id="x-axis"></div>
                <div id="y-axis-holder">
                    <div id="y-axis-cell">
                        <div class="label axis" id="y-axis"></div>
                    </div>
                </div>
            </div>
            <div id="visualization">
            </div>
        </div>
</template>
