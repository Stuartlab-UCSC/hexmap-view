
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Data Server Install &#8212; TumorMap Developer Documentation</title>
    <link rel="stylesheet" href="_static/agogo.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/custom.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="View Server Install: development" href="viewerInstallDev.html" />
    <link rel="prev" title="Internal Web API" href="internalWebApi.html" /> 
  </head>
  <body>
    <div class="header-wrapper" role="banner">
      <div class="header">
        <div class="headertitle"><a
          href="index.html">TumorMap Developer Documentation</a></div>
        <div class="rel" role="navigation" aria-label="related navigation">
          <a href="internalWebApi.html" title="Internal Web API"
             accesskey="P">previous</a> |
          <a href="viewerInstallDev.html" title="View Server Install: development"
             accesskey="N">next</a> |
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="data-server-install">
<h1>Data Server Install<a class="headerlink" href="#data-server-install" title="Permalink to this headline">¶</a></h1>
<div class="section" id="install-server-source-code">
<h2>Install server source code<a class="headerlink" href="#install-server-source-code" title="Permalink to this headline">¶</a></h2>
<p>The data server code repository is at: <a class="reference external" href="https://github.com/ucscHexmap/compute">https://github.com/ucscHexmap/compute</a>.
Install the source, where <em>my-app</em> is the root directory of the app:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">my</span><span class="o">-</span><span class="n">app</span>
<span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">ucscHexmap</span><span class="o">/</span><span class="n">compute</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
</div>
<div class="section" id="set-environment-variable-and-path">
<h2>Set environment variable and path<a class="headerlink" href="#set-environment-variable-and-path" title="Permalink to this headline">¶</a></h2>
<p>Define the HEXCALC environment variable to point to the installation directory.
Add the binary path to your path.
You should put these in your login profile:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>export HEXCALC=my-app/compute
PATH=$HEXCALC/bin:$PATH
</pre></div>
</div>
</div>
<div class="section" id="make-data-directories">
<h2>Make data directories<a class="headerlink" href="#make-data-directories" title="Permalink to this headline">¶</a></h2>
<p>Make data directories used during operations. The <em>my-data</em> directory does not
need to be in any particular place in relation to the <em>my-app</em> directory:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="o">-</span><span class="n">p</span> <span class="n">my</span><span class="o">-</span><span class="n">data</span><span class="o">/</span><span class="n">featureSpace</span> <span class="n">my</span><span class="o">-</span><span class="n">data</span><span class="o">/</span><span class="n">view</span>
</pre></div>
</div>
</div>
<div class="section" id="https">
<h2>HTTPS<a class="headerlink" href="#https" title="Permalink to this headline">¶</a></h2>
<p>If you want to use https, put the certificates someplace where the server will
find it.</p>
</div>
<div class="section" id="install-drl">
<h2>Install DrL<a class="headerlink" href="#install-drl" title="Permalink to this headline">¶</a></h2>
<p>DrL graph layout [1]</p>
<p>To install in most unices. Other platforms may be installed as indicated in the
drl-graph-layout/readme.txt:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>cd $HEXCALC/../
mkdir packages
cd packages
wget https://bitbucket.org/adam_novak/drl-graph-layout/get/c41341de8058.zip
#alternatively:
    curl https://bitbucket.org/adam_novak/drl-graph-layout/get/c41341de8058.zip &gt; c41341de8058.zip
unzip c41341de8058.zip
cd adam*/src
cp Configuration.gnu Configuration.mk
make
ls ../bin
cd ../../
mv adam_novak-drl-graph-layout-c41341de8058 drl-graph-layout
</pre></div>
</div>
<p>In bin you should see ‘truncate’ among other binaries.</p>
</div>
<div class="section" id="configure">
<h2>Configure<a class="headerlink" href="#configure" title="Permalink to this headline">¶</a></h2>
<p>Build a configuration file at ops/config.sh similar to
ops/configExamples/prod.sh.</p>
</div>
<div class="section" id="install-python">
<h2>Install python<a class="headerlink" href="#install-python" title="Permalink to this headline">¶</a></h2>
<p>See compute/build/README to install python and a python environment.</p>
<p>Note that if you do not have libssl-dev installed, uwsgi will not have the https
options available.</p>
</div>
<div class="section" id="start-server">
<h2>Start server<a class="headerlink" href="#start-server" title="Permalink to this headline">¶</a></h2>
<p>If you will be running the server on an unprotected port, simply use this form:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>cd $HEXCALC
bin/start

cd $HEXCALC
bin/stop
</pre></div>
</div>
<p>The log file is at compute/ops/log with older logs in compute/ops/logsPrev.</p>
<p>Other scripts are described in bin/README.</p>
<div class="section" id="on-protected-ports">
<h3>On protected ports<a class="headerlink" href="#on-protected-ports" title="Permalink to this headline">¶</a></h3>
<p>If you will be running the server on a protected port, including 80 or 443,
you need to run the server as root. Prefix the above with
<em>sudo –preserve-env</em>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>sudo --preserve-env $HEXCALC/bin/start

cd $HEXCALC
bin/stop
</pre></div>
</div>
<p>After the server is started on the protected port the user and group ID of the
processes will be changed to the ownership as specified in the configuration
file as HEX_UID and HEX_GID.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
          <h3>Table Of Contents</h3>
          <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="internalWebApi.html">Internal Web API</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Data Server Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="viewerInstallDev.html">View Server Install: development</a></li>
<li class="toctree-l1"><a class="reference internal" href="viewerInstallBundle.html">View Server Install: production</a></li>
<li class="toctree-l1"><a class="reference internal" href="repository.html">Git Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="docs.html">This Document</a></li>
</ul>

          <div role="search">
            <h3 style="margin-top: 1.5em;">Search</h3>
            <form class="search" action="search.html" method="get">
                <input type="text" name="q" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
            </form>
          </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <div role="navigation" aria-label="related navigaton">
            <a href="internalWebApi.html" title="Internal Web API"
              >previous</a> |
            <a href="viewerInstallDev.html" title="View Server Install: development"
              >next</a> |
            <a href="genindex.html" title="General Index"
              >index</a>
          </div>
          <div role="note" aria-label="source link">
              <br/>
              <a href="_sources/computeInstall.rst.txt"
                rel="nofollow">Show Source</a>
          </div>
        </div>

        <div class="right">
          
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, UCSC TumorMap developers.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.5.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>