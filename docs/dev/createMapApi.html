
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Create map &#8212; Tumor Map Developer Documentation</title>
    <link rel="stylesheet" href="_static/agogo.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/custom.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
  </head>
  <body>
    <div class="header-wrapper" role="banner">
      <div class="header">
        <div class="headertitle"><a
          href="index.html">Tumor Map Developer Documentation</a></div>
        <div class="rel" role="navigation" aria-label="related navigation">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="create-map">
<h1>Create map<a class="headerlink" href="#create-map" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://hexcalc.ucsc.edu:5000/query/">https://hexcalc.ucsc.edu:5000/query/</a><strong>createMap</strong></p>
<p>HTTP POST with content-type: application/json</p>
<p>data-type: json</p>
<p>This API builds a new map from data you have supplied via an upload to the
compute server, or data that is already on the compute server.</p>
<div class="section" id="content-example">
<h2>Content Example<a class="headerlink" href="#content-example" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;map&quot;</span><span class="p">:</span> <span class="s2">&quot;CKCC/v3&quot;</span><span class="p">,</span>
   <span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="s2">&quot;mok66@gmail.com&quot;</span><span class="p">,</span>
   <span class="s2">&quot;layoutInputDataId&quot;</span><span class="p">:</span> <span class="s2">&quot;featureSpace/me_ucsc.edu/map/features.tab&quot;</span>
   <span class="s2">&quot;layoutInputName&quot;</span><span class="p">:</span> <span class="s2">&quot;mRNA&quot;</span><span class="p">,</span>
   <span class="s2">&quot;colorAttributeDataId&quot;</span><span class="p">:</span> <span class="s2">&quot;featureSpace/me_ucsc.edu/map/attributes.tab&quot;</span><span class="p">,</span>
   <span class="s2">&quot;outputDirectory&quot;</span><span class="p">:</span> <span class="s2">&quot;view//me_ucsc.edu/map&quot;</span><span class="p">,</span>
   <span class="s2">&quot;zeroReplace&quot;</span><span class="p">:</span> <span class="n">true</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Where:</p>
<ul class="simple">
<li><strong>map</strong> : a unique identifier. If you want the map to belong to a map group,
that is included before the specific map separated by a slash as in the example.</li>
<li><strong>email</strong> : optional, one or more email addresses to receive the response. A
single string may be supplied or an array of strings.</li>
<li><strong>layoutInputDataId</strong> : data ID on the compute server which contains your data
to use in laying out the map.  This may be a string,
or an array of strings when there are multiple layout input data sources.
There are four types of data that may be provided which are described at
<a class="reference external" href="https://tumormap.ucsc.edu/help/createMap.html">User Guide</a>.
If more than one data source is provided they all must be of the same data type.</li>
<li><strong>layoutInputName</strong> : string used to name this layout. This may be a string,
or an array of strings when there are multiple layout input data sources.</li>
<li><strong>colorAttributeDataId</strong> : optional, data ID on the compute server which
contains your color attribute data to use in coloring the map. This may be a
string, or an array of strings when there are multiple color attribute data sources.
For the format of the data, see the color attribute format section in the
<a class="reference external" href="https://tumormap.ucsc.edu/help/createMap.html">User Guide</a>.</li>
<li><strong>outputDirectory</strong> : the directory in which to store the output. May be
relative to the data root, such as “view/…” or a full path</li>
<li><strong>zeroReplace</strong> : replace all NA values with zero</li>
</ul>
</div>
<div class="section" id="response-success">
<h2>Response success<a class="headerlink" href="#response-success" title="Permalink to this headline">¶</a></h2>
<p>This is returned as HTTP 200 with the content as a JSON string containing
something like:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;jobId&quot;</span><span class="p">:</span> <span class="s2">&quot;123&quot;</span><span class="p">,</span>
   <span class="s2">&quot;jobStatusUrl&quot;</span><span class="p">:</span> <span class="s2">&quot;https://hexcalc.ucsc.edu/5000/jobStatus/jobId/123&quot;</span><span class="p">,</span>
   <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;InJobQueue&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Where:</p>
<ul class="simple">
<li><strong>jobId</strong> : an identifer that may be used to query the status of the job via the
<a class="reference external" href="http://tumormap.ucsc.edu/query/jobStatus/">Job Status API</a> .</li>
<li><strong>jobStatusUrl</strong> : a URL that may be used to check the status</li>
<li><strong>status</strong> : always “InJobQueue”</li>
</ul>
</div>
<div class="section" id="response-error">
<h2>Response error<a class="headerlink" href="#response-error" title="Permalink to this headline">¶</a></h2>
<p>Response errors are returned with some code other than HTTP 200 with the content
containing a more specific message and an optional stack trace as a JSON string
in the form:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;Some message.&quot;</span>
   <span class="s2">&quot;stackTrace&quot;</span> <span class="s2">&quot;an optional stack trace&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="getting-the-results">
<h2>Getting the results<a class="headerlink" href="#getting-the-results" title="Permalink to this headline">¶</a></h2>
<p>The results of the calculation may be retrieved with the URL supplied in the
successful response. Statuses that may be returned are described at the
<a class="reference external" href="http://tumormap.ucsc.edu/query/jobStatus/">Job Status API</a></p>
<p>When the job has completed successfully, the response to the get status request
will be “Success” and the result object will contain something like below where
the url is location of your new map:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;Success&quot;</span><span class="p">,</span>
   <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://tumormap.ucsc.edu/?p=myMap&quot;</span><span class="p">,</span>
   <span class="s2">&quot;logFile&quot;</span><span class="p">:</span> <span class="s2">&quot;/hive/groups/hexmap/prod/view/me_ucsc.edu/myMap/log&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If an email address was provided a message will be sent when the job completes.</p>
</div>
</div>


          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
          <h3>Table Of Contents</h3>
          <ul>
<li class="toctree-l1"><a class="reference internal" href="internalWebApi.html">Internal Web API</a></li>
<li class="toctree-l1"><a class="reference internal" href="computeSource.html">Source Code: Compute Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="viewerSource.html">Source Code: View Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="repository.html">Code Repository &amp; git</a></li>
<li class="toctree-l1"><a class="reference internal" href="computeInstall.html">Compute Server Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="viewerInstallUnbundled.html">View Server Install: development</a></li>
<li class="toctree-l1"><a class="reference internal" href="viewerInstallBundled.html">View Server Install: production</a></li>
<li class="toctree-l1"><a class="reference internal" href="docs.html">This Document</a></li>
</ul>

          <div role="search">
            <h3 style="margin-top: 1.5em;">Search</h3>
            <form class="search" action="search.html" method="get">
                <input type="text" name="q" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
            </form>
          </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <div role="navigation" aria-label="related navigaton">
            <a href="genindex.html" title="General Index"
              >index</a>
          </div>
          <div role="note" aria-label="source link">
              <br/>
              <a href="_sources/createMapApi.rst.txt"
                rel="nofollow">Show Source</a>
          </div>
        </div>

        <div class="right">
          
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, UCSC Tumor Map developers.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.5.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>