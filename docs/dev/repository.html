<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Code Repository &#8212; Tumor Map Developer Documentation</title>
    
    <link rel="stylesheet" href="_static/agogo.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Requirements &amp; Installation" href="requirements.html" />
    <link rel="prev" title="Source: Server" href="serverSource.html" /> 
  </head>
  <body role="document">
    <div class="header-wrapper" role="banner">
      <div class="header">
        <div class="headertitle"><a
          href="index.html">Tumor Map Developer Documentation</a></div>
        <div class="rel" role="navigation" aria-label="related navigation">
          <a href="serverSource.html" title="Source: Server"
             accesskey="P">previous</a> |
          <a href="requirements.html" title="Requirements &amp; Installation"
             accesskey="N">next</a> |
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="code-repository">
<h1>Code Repository<a class="headerlink" href="#code-repository" title="Permalink to this headline">¶</a></h1>
<p>The code repository is at
<a class="reference external" href="https://github.com/ucscHexmap/hexagram">github.com/ucscHexmap/hexagram</a>, in
the dev branch for development.</p>
<div class="section" id="repository-branches">
<h2>Repository branches<a class="headerlink" href="#repository-branches" title="Permalink to this headline">¶</a></h2>
<p>There are two main branches, &#8220;master&#8221; and &#8220;dev&#8221;. Master is used to hold the
latest production version so should be kept clean. Nothing is ever comitted
directly into the master branch. It gets updated by the repository meister when
there is a new release by merging from the dev branch.</p>
<p>You may use
personal or project branches off of dev however working directly on the dev
branch is fine. Working directly on dev will allow the rest of us to use your
changes as soon as you push them to the remote repository. Otherwise you will
need to do a merge for others to easily use your work.</p>
</div>
<div class="section" id="a-git-quick-start">
<h2>A git quick start<a class="headerlink" href="#a-git-quick-start" title="Permalink to this headline">¶</a></h2>
<p>Git comes pre-installed on most systems. Otherwise see <a class="reference external" href="https://github.com">https://github.com</a> to
install it.</p>
<p><a class="reference external" href="https://www.sourcetreeapp.com">https://www.sourcetreeapp.com</a> has a great UI for dealing with most of git. It
does all of the commands below and is especially good for viewing diffs.
However it is good to understand the sequence of events and commands behind it,
and sometimes the UI is slow to update.</p>
<p>These commands are everything you need from the point of checking out the dev
branch through committing your files and merging to dev if you&#8217;ve branched off
of it. If things awry, you may need some other commands.</p>
<p><strong>#1</strong>. Get a copy of the source code on the dev branch. Change to the directory where
you want to put the source code, then:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="o">-</span><span class="n">b</span> <span class="n">dev</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">ucscHexmap</span><span class="o">/</span><span class="n">hexagram</span>
<span class="n">git</span> <span class="n">fetch</span>
<span class="n">cd</span> <span class="n">hexagram</span>
</pre></div>
</div>
<p>The fetch allows other branches in githup to be seen by your local git.</p>
<p><strong>#2</strong>. Get status to verify things went well and verify the branch:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">status</span>
</pre></div>
</div>
<p>Now you can either work directly on the dev branch, or create your own branch
off of dev.</p>
<p>Create your own branch if you want to isolate other developers from
your changes as you save them to the remote repository. Then when you are ready
to expose your changes to other developers, do a merge from your branch to dev.
Your own branch is a good idea if you are working on something
experimentally and you are not sure it will go into the common code.</p>
<p>Otherwise, working directly on the dev branch requires fewer merges and you just
have to be more careful with each push to the remote. With fewer merges, this
is an advantage if you are working closely with others on the same feature.</p>
<p>To work on your own branch create one as follows, otherwise skip this step
and continue with the next. The commits, pushes and pulls in the following steps
will apply to whichever branch your are currently on.</p>
<p><strong>#3</strong>. We&#8217;ll call the new branch &#8216;mine&#8217; for this example. Notice that to create
a branch or change to an existing branch is the same command:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">checkout</span> <span class="o">-</span><span class="n">b</span> <span class="n">mine</span>
<span class="n">git</span> <span class="n">status</span>
</pre></div>
</div>
<p><strong>#4</strong>. Git has helpful messages when you want to commit. After you have added and
changed files, &#8216;git status&#8217; gives something like:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">On</span> <span class="n">branch</span> <span class="n">dev</span>
<span class="n">Your</span> <span class="n">branch</span> <span class="ow">is</span> <span class="n">up</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">date</span> <span class="k">with</span> <span class="s1">&#39;origin/dev&#39;</span><span class="o">.</span>
<span class="n">Changes</span> <span class="n">to</span> <span class="n">be</span> <span class="n">committed</span><span class="p">:</span>
  <span class="p">(</span><span class="n">use</span> <span class="s2">&quot;git reset HEAD &lt;file&gt;...&quot;</span> <span class="n">to</span> <span class="n">unstage</span><span class="p">)</span>

       <span class="n">modified</span><span class="p">:</span>   <span class="n">server</span><span class="o">/</span><span class="n">statsLayer</span><span class="o">.</span><span class="n">py</span>

<span class="n">Changes</span> <span class="ow">not</span> <span class="n">staged</span> <span class="k">for</span> <span class="n">commit</span><span class="p">:</span>
  <span class="p">(</span><span class="n">use</span> <span class="s2">&quot;git add &lt;file&gt;...&quot;</span> <span class="n">to</span> <span class="n">update</span> <span class="n">what</span> <span class="n">will</span> <span class="n">be</span> <span class="n">committed</span><span class="p">)</span>
  <span class="p">(</span><span class="n">use</span> <span class="s2">&quot;git checkout -- &lt;file&gt;...&quot;</span> <span class="n">to</span> <span class="n">discard</span> <span class="n">changes</span> <span class="ow">in</span> <span class="n">working</span> <span class="n">directory</span><span class="p">)</span>

        <span class="n">modified</span><span class="p">:</span>   <span class="n">client</span><span class="o">/</span><span class="n">colors</span><span class="o">.</span><span class="n">js</span>

<span class="n">Untracked</span> <span class="n">files</span><span class="p">:</span>
  <span class="p">(</span><span class="n">use</span> <span class="s2">&quot;git add &lt;file&gt;...&quot;</span> <span class="n">to</span> <span class="n">include</span> <span class="ow">in</span> <span class="n">what</span> <span class="n">will</span> <span class="n">be</span> <span class="n">committed</span><span class="p">)</span>

       <span class="o">.</span><span class="n">server</span><span class="o">/</span><span class="n">myFile</span>
</pre></div>
</div>
<p>Adding and checking in files is a two step process where files are staged before
actually committed to the repository. In the above:</p>
<p><strong>server/statsLayer.py</strong> is already staged for commit</p>
<p><strong>client/colors.js</strong> is a modified, existing file</p>
<p><strong>.server/myFile</strong> is a new file</p>
<p>So do the appropriate action to stage all the files you want to commit, then
continue with the next step.</p>
<p><strong>#5</strong>. The commit actually updates the repository:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">commit</span>
</pre></div>
</div>
<p>A vim editor with your changes shows up. Add a comment and quit the editor.
This commits files to your <strong>local</strong> git repository.</p>
<p><strong>#6</strong>. If the commit went without any errors, you probably want to
push it to the remote repository for safe keeping in case you lose the files on
your laptop.</p>
<p>First pull down any changes from the remote repository so if a merge is
required, you can do it locally rather than trying to fix up the remote repository
where things could get ugly:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">pull</span>
</pre></div>
</div>
<p><strong>#7</strong>. If there are any merge conflicts, git will tell you about them, and after
fixing and sanity checking, commit as in steps 4 &amp; 5 above. If there are no conflicts, your
repository now has any changes anyone else committed and pushed to the remote
since last time you pulled. Now push your changes to the remote repository:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">push</span>
</pre></div>
</div>
<p>Ta da! If you are working off the dev branch, you&#8217;re golden.</p>
<div class="section" id="merging-from-your-branch-into-dev">
<h3>Merging from your branch into dev<a class="headerlink" href="#merging-from-your-branch-into-dev" title="Permalink to this headline">¶</a></h3>
<p>If you are working on your own branch which is off of dev, you will eventually need to
merge your branch into dev. We&#8217;ll use &#8216;mine&#8217; as your own branch in this example.</p>
<p><strong>#8</strong>. Change to the dev branch then update your local dev branch from the remote dev branch:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">checkout</span> <span class="n">dev</span>
<span class="n">git</span> <span class="n">pull</span>
</pre></div>
</div>
<p><strong>#9</strong>. Now you do the merge from your branch to dev:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">merge</span> <span class="n">mine</span>
</pre></div>
</div>
<p><strong>#10</strong>. Do sanity testing. Then push your dev to the remote dev:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">push</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="releasing-a-new-version">
<h2>Releasing a new version<a class="headerlink" href="#releasing-a-new-version" title="Permalink to this headline">¶</a></h2>
<p>The release branch merges go like this, starting in the lower left corner:</p>
<a class="reference internal image-reference" href="_images/release.png"><img alt="_images/release.png" src="_images/release.png" style="width: 300px;" /></a>
<p>.</p>
<p><strong>#1</strong>. Check out the dev branch and update it.
Check out the master branch, update and merge in dev:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">checkout</span> <span class="n">dev</span>
<span class="n">git</span> <span class="n">pull</span>
<span class="n">git</span> <span class="n">checkout</span> <span class="n">master</span>
<span class="n">git</span> <span class="n">pull</span>
<span class="n">git</span> <span class="n">merge</span> <span class="n">dev</span>
</pre></div>
</div>
<p><strong>#2</strong>. Sanity test, update the remote master branch and create a release branch:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">push</span>
<span class="n">git</span> <span class="n">checkout</span> <span class="n">v1</span><span class="o">.</span><span class="mi">0</span><span class="n">_branch</span>
</pre></div>
</div>
<p><strong>#3</strong>. Change the version and cherry pick any changes you want in dev
that were committed after the point of version branching:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">vi</span> <span class="n">mainHex</span><span class="o">.</span><span class="n">js</span> <span class="c1"># edit VERSION</span>
<span class="n">git</span> <span class="n">cherry</span><span class="o">-</span><span class="n">pick</span> <span class="o">&lt;</span><span class="nb">list</span><span class="o">-</span><span class="n">of</span><span class="o">-</span><span class="n">commit</span><span class="o">-</span><span class="n">IDs</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>#4</strong>. Sanity test, make fixes, tag, update the remote version branch:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">push</span>
<span class="n">git</span> <span class="n">tag</span> <span class="n">v1</span><span class="o">.</span><span class="mi">0</span>
<span class="n">git</span> <span class="n">push</span> <span class="n">v1</span><span class="o">.</span><span class="mi">0</span>
</pre></div>
</div>
<p><strong>#5</strong>. Merge the version branch into the master branch:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">checkout</span> <span class="n">master</span>
<span class="n">git</span> <span class="n">merge</span> <span class="n">v1</span><span class="o">.</span><span class="mi">0</span><span class="n">_branch</span>
<span class="n">git</span> <span class="n">push</span>
</pre></div>
</div>
<p><strong>#6</strong>. Merge the master branch into dev:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">checkout</span> <span class="n">dev</span>
<span class="n">git</span> <span class="n">merge</span> <span class="n">master</span>
<span class="n">git</span> <span class="n">push</span>
</pre></div>
</div>
<p>(we may want to cherry-pick commits in master that we want to go to dev,
rather than merging, which may produce conflicts)</p>
<p>Some other handy git commands:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">branch</span> <span class="o">-</span><span class="n">r</span>
<span class="n">git</span> <span class="n">ls</span><span class="o">-</span><span class="n">remote</span> <span class="o">--</span><span class="n">tags</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
          <h3>Table Of Contents</h3>
          <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="internalApi.html">Internal Calc API on Hub</a></li>
<li class="toctree-l1"><a class="reference internal" href="Nof1.html">Calc API: N-of-1 Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="internalWebApi.html">Internal Web API on Hub</a></li>
<li class="toctree-l1"><a class="reference internal" href="source.html">Source Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="clientSource.html">Source: Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="serverSource.html">Source: Server</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Code Repository</a></li>
<li class="toctree-l1"><a class="reference internal" href="requirements.html">Requirements &amp; Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="docs.html">This Document</a></li>
<li class="toctree-l1"><a class="reference internal" href="licenses.html">Licenses</a></li>
</ul>

          <div role="search">
            <h3 style="margin-top: 1.5em;">Search</h3>
            <form class="search" action="search.html" method="get">
                <input type="text" name="q" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
            </form>
          </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <div role="navigation" aria-label="related navigaton">
            <a href="serverSource.html" title="Source: Server"
              >previous</a> |
            <a href="requirements.html" title="Requirements &amp; Installation"
              >next</a> |
            <a href="genindex.html" title="General Index"
              >index</a>
          </div>
          <div role="note" aria-label="source link">
              <br/>
              <a href="_sources/repository.rst.txt"
                rel="nofollow">Show Source</a>
          </div>
        </div>

        <div class="right">
          
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016, UCSC Tumor Map development team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.1.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>