
Prepare for Layout
==================

This describes utilities to transform your data into the format the layout
utility accepts.

Substitute your directories for this tokens:

*HEX* : root directory of hex server



compute_sparse_matrix.py
------------------------

This will convert your genomic matrix into a sparse matrix.

An Example::

 python2.7 *HEX*/calc/compute_sparse_matrix.py \
    --in_file mRNA_matrix.tab \  # one of your genomic matrix files
    --top 6 \                    # number of top neighbors to use in the sparse graph structure
    --metric correlation \       # which metric to use; for continuous data like mRNA expression we use correlation
    --output_type sparse \       # use sparse for the purpose of building a tumor map
    â€”o-ut_file mRNA_sparse.tab   # the sparse matrix output file


create_colormaps.py
-------------------

This will create colormaps from the categorical attributes in your attribute matrix.

An Example::

 python2.7 *HEX*/calc/create_colormaps.py \
    --in_attributes attribute_matrix.tab \  # one of your attribute matrix files
    --out_file colormaps.tab                # the colormap generated for these attributes

Attributes are determined to be categorical if all values are integers
and not zero, one, or NaN.

If you want to assign something other than the default colors to a binary
attribute, edit two files after layout.py generates and puts them in
the view data directory:

    * make an entry for it in colormaps.tab
    * move its entry from the Binary list to the Categorical list in Layer_Data_Types.tab

Attributes with continuous values that happen to be all integers are incorrectly
colored like binary attributes, with a zero value color for any values other
than 1.
Note that a value like 3.0 is interpreted as an integer.
If this is a problem let us know so it moves up in the bug fix priorities.


convert_annotation_to_tumormap_mapping.py
-----------------------------------------

This will convert your attribute matrix into Tumor Map mappings (since Tumor
Map works from numeric mappings to color codes rather than raw attribute values).

An Example::

 python2.7 *HEX*/calc/convert_annotation_to_tumormap_mapping.py \
    --in_colormap clinical_colormaps.tab \     # a colormap file generated by create_colormaps.py
    --in_attributes clinical_attributes.tab \  # an attributes file that was supplied to create_colormaps.py
    --filter_attributes_flag TRUE \            # if the attributes file has some attributes that are not a part of the colormaps file and this flag is TRUE, those will be filtered out; set this attribute to FALSE if you have some attributes in your attributes file that you want to keep but there's no color mapping (e.g. mutation attributes will often be like this since we generating a color mapping for binary attributes is not required)
    --output attributes_clinical.tab           # the attributes file formatted for the layout utility

