
Viewer Input File Formats
=========================

This describes formats of input files for the Tumor Map viewer. Lacking an API
to create maps, this may work for you.

These are some terms used in the descriptions below:

 | *attribute* : an attribute, AKA layer, of the nodes/hexagons
 | *ID* : a unique identifer of a node/hexagon
 | *layer* : an attribute of the nodes/hexagons
 | *LAYER* : the layer index used in file names
 | *layout* : the type of values by which nodes will be placed on the map
 | *LAYOUT* : the layout index used in file names
 | *node* : the thing that will be represented by a hexagon in the viewer


Required Files
--------------

Six types of files are required by the Tumor Map viewer.

**hexNames.tab**: A list of node/hexagon names::

 S1
 ...

**layouts.tab**: Names of the layouts in order of the LAYOUT index used in some
file names::

 mRNA seq
 ...

**assignmentsLAYOUT.tab** (1): The xy coordinates from zero to whatever. May be
of type float. One file per layout::

 ID     x   y
 S1     42  66
 ...

**Layer_Data_Types.tab**: Lists of attribute data types, mostly. FirstAttribute
is the attribute to display on the initial map view::

 FirstAttribute  Tissue
 Continuous      DNA_signature   Apoptosis   ...
 Binary          TP53_mutated   DNA_repair_broken    ...
 Categorical     Subtype Gender  ...

**layer_LAYER.tab** (1): The attribute values for nodes with a value for this
attribute. One file per attribute::

 ID     value
 S1     0.642
 ...

**colormaps.tab** (1): Color mappings to categories of categorical attributes::

 attribute       index   category        color   index   category    color   index   category    color  ...
 UCEC Subtype    0       Endometrioid    #FF0000 1       Serous      #00FF00 2       Mixed       #FFFF00
 ...

Note
(1) Viewer needs to be modified to ignore the headers in these files.

(TODO: meta.json)


Optional File
-------------

**attribute_tags.tab** (1): Gives tags to attributes used in filtering those
available for search and display in the attribute list::

 attribute	keywords (tab separated)
 Tissue     clinical	phenotype
 ...

Generated Optional Files
------------------------

These optional files are generated by the Tumor Map layout code.

**stats_LAYER.tab**: Associative statistics with other attributes, independent
of the layout.

**statsL_LAYER_LAYOUT.tab**: Associative statistics with other attributes,
taking the layout into account.

**windows_LAYOUT.tab**: Sampling windows used in layout-aware statistics.

**xyPreSquiggle_LAYOUT.tab**: xy coordinates of nodes prior to being transformed
into the hexagonal grid. Displayed in the Node Density view.

**neighbors_LAYOUT.tab**: The closest six neighbors to each node. Displayed in
the Node Density view: Edges.

**grid_LAYOUT.tab**: Adaptive windowing used for the layout-aware statistics.
Displayed in the Node Density view: Windows.

The remaining files are unused by the Tumor Map viewer. Maybe something else
uses them.

**matrices.tab**: Filenames of the attribute scores::

 matrix_0.tab
 matrix_1.tab
 ...

**matrix_LAYER.tab**: Attribute scores for nodes::

 ID     attr0   attr1   attr2   ...
 S1     3       0.485   -1.24   ...
 ...
